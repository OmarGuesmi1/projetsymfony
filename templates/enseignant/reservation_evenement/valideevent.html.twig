{% extends 'enseignant/enseignatevent.html.twig' %}

{% block title %}RÃ©servations Ã‰vÃ©nements ValidÃ©es{% endblock %}

{% block body %}
<div class="container mt-5">
    <!-- BanniÃ¨re verte pour signaler les rÃ©servations validÃ©es -->
    <div class="alert alert-success text-center" role="alert" style="font-size: 1.2rem;">
        âœ… <strong>FÃ©licitations :</strong> Liste des rÃ©servations <span class="text-uppercase">validÃ©es</span> âœ…
    </div>

    <h1 class="text-center mb-4">ğŸ“‹ RÃ©servations Ã‰vÃ©nements ValidÃ©es</h1>

    <div class="list-group">
        {% for reservation in reservations_valides %}
            <div class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                    <p>
                        <strong>ğŸ†” ID de la RÃ©servation :</strong> {{ reservation.id }}<br>
                        <strong>ğŸ“… Date de dÃ©but :</strong> {{ reservation.DateDebutRE|date('d/m/Y') }}<br>
                        <strong>ğŸ“… Date de fin :</strong> {{ reservation.DateFinRE|date('d/m/Y') }}<br>
                        <strong>âœ”ï¸ Statut :</strong> <span class="text-success">ValidÃ©e</span><br>
                        <strong>ğŸ“‚ Classe de rÃ©servation :</strong> {{ reservation.ClassReservationEvent }}
                    </p>
                    {% if reservation.evenements|length > 0 %}
                        <p>
                            <strong>ğŸ‰ Ã‰vÃ©nements associÃ©s :</strong>
                        </p>
                        <ul>
                            {% for evenement in reservation.evenements %}
                                <li>ğŸ“Œ {{ evenement.nomEvenement }}</li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <em>ğŸš« Aucun Ã©vÃ©nement associÃ©</em>
                    {% endif %}
                </div>

                <div class="d-flex flex-column">
                    <!-- Boutons actions -->
                    <a href="{{ path('app_reservation_edit', {'id': reservation.id}) }}" class="btn btn-warning btn-sm mb-2">
                        âœï¸ Modifier
                    </a>
                    <a href="{{ path('reservation_show', {'id': reservation.id}) }}" class="btn btn-info btn-sm mb-2">
                        ğŸ‘ï¸ Voir
                    </a>
                    <form method="post" action="{{ path('reservation_evenement_delete', { id: reservation.id }) }}" 
      style="display:inline;" onsubmit="return confirm('ÃŠtes-vous sÃ»r ?');">
    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ reservation.id) }}">
    
    <button class="btn btn-danger btn-sm"
        data-bs-toggle="tooltip" 
        title="{% if reservation.participants is not empty %}Impossible de supprimer cette rÃ©servation car elle a des participants{% endif %}"
        {% if reservation.participants is not empty %}disabled{% endif %}>
        <i class="fas fa-trash-alt"></i> Supprimer
    </button>
</form>

                </div>
            </div>
        {% else %}
            <div class="alert alert-warning text-center">
                ğŸ˜” Aucune rÃ©servation validÃ©e trouvÃ©e.
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block stylesheets %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEJ+K5u7zR7+u7o5zK+K2LkT4AlzxvZr9/Ml78Gq4YXeb5gQzLHgEAmr2m68g" crossorigin="anonymous">
    <style>
        .list-group-item {
            margin-bottom: 15px;
            padding: 20px;
            border-radius: 8px;
            background-color: #f9fff9;
            border: 1px solid #d4edda;
        }
        .list-group-item:hover {
            background-color: #e2f7e2;
            border-color: #c3e6cb;
        }
        .btn {
            font-size: 0.9rem;
        }
    </style>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gnXddXytsC9G9ZtbwM5ISW6g52Q6jYZPCaytZ9InGr1xFbxVdsw6pGJ1yGVd7jfU" crossorigin="anonymous"></script>

{% endblock %}



